<%doc>
Show comments for story or media

License: Artistic License
         http://www.opensource.org/licenses/artistic-license.php

$Id: comments,v 1.12 2004/10/11 14:35:59 sauber Exp $
</%doc>
% if ( @$comments > 0 ) {
<h3>**comments**</h3>
%   #
%   # Display all existing comments
%   #
%   for my $c ( @$comments ) {
<p><% $c->{Comment} %><p>
%     if ( $c->{Email} ) {
**posted_by**: <a href="mailto:<% $c->{Email} %>"><% $c->{Name} %></a>.
%     } else {
**posted_by**: <% $c->{Name} %>.
%     }
**date**: <% $c->{Date} %>.
<hr>
%   }
% }
% #
% # Offer a form to input comments
% #
% # XXX: Extract username/email from cookie if possible
<h4>**post_a_comment**</h4>
<&| /htm/admin/fill_in_form.mas, data => $spoejs{ARGS}, ignore => $ignore &>
<form name="comments" method="post" action="">
**name**: <input name="name" size="20"/><br>
**email**: <input name="email" size="20"/> **(optional)**<br>
**comments**: <input name="comment" size="60"/><br>
<& /w, w => "humantest" &>
<input type="submit" name="comments" value="**add_comment**"/>
</form>
</&>
<%args>
  $comments => undef
  $ignore   => undef
</%args>
