<h1>Spoejs channels at this site:</h1>
% foreach my $chan ( @channels ) {
% if ( $chan->get( 'active' ) eq 'yes' && $chan->get( 'public' ) eq 'yes' ) {
<a href="/<% $chan->channel_dir() %>/index.html"><% $chan->get( 'title' ) %>
</a><br/>
% } }
<hr/>
Change language:<br/>
<& /w, w => 'langchooser' &>
<br/>
Administration:
<br/>
<a href="/htm/admin/siteconfig.html">
Site configuration
</a>
<%init>
my $CL = new Spoejs::ChannelList( path => "$ENV{DOCUMENT_ROOT}/users/",
                                  lang => $spoejs{lang_handle} );
$spoejs{error}{$m->current_comp->source_file} = $CL->{msg} if $CL->{msg};
my $SC = new Spoejs::SiteConf( path => "$ENV{DOCUMENT_ROOT}/../lib",
                               lang => $spoejs{lang_handle} );
$spoejs{error}{$m->current_comp->source_file} = $SC->{msg} if $SC->{msg};
my $policy = $SC->get( 'policy' );
# Gives array of ChannelConf object refs
my @channels = $CL->search_channels();
</%init>