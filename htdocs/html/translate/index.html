%# $Id: index.html,v 1.2 2004/03/14 11:40:53 sauber Exp $
<%args>
$username=>undef
$password=>undef
</%args>
<%init>
#my($d);
my($l,$u,$p,$e,$n);
if ( $username and $password ) {
  open FH, "$ENV{DOCUMENT_ROOT}/html/translate/people.txt";
    while (<FH>) {
      next if /^#/;
      #$d .= $_;
      ($l,$u,$p,$e,$n) = split ',';
      last if $u eq $username and $p eq $password;
      undef $l;
    }
  close FH;
  if ( $l ) {
    if ( $l eq 'admin' ) {
      $session{translator} = 'en';
      $session{wordadmin} = 1;
    } else {
      $session{translator} = $l;
    }
  }
}
</%init>
% if ( $session{translator} ) {
<p>You are authorized to edit <% $session{translator} %> language.
<a href=logout.html>Logout</a>.</p>
<& form.html, %ARGS &>
% } else {
<p>Welcome translator. Please log in.</p>
<form method="POST">
Username: <input name="username"/><br/>
Password: <input name="password" type=password/><br/>
<input type=submit value="Login"/>
</form>
% }
